[
    {"type": "text", "text": "This is a tabletop manipulation scene with a Franka robotic arm. The task is: {{ task_description }}.\n"},
    
    {"type": "text", "text": "You are given the following images:\n"},
    
    {"type": "text", "text": "- Start frame views:"},
    {% for path in start_frame_images %}
    {"type": "image", "image": "file:///{{ path }}"},
    {% endfor %}
    
    {"type": "text", "text": "- End frame views [just for understanding]:"},
    {% for path in end_frame_images %}
    {"type": "image", "image": "file:///{{ path }}"},
    {% endfor %}
    
    {"type": "text", "text": "Before reaching the start frame, the following sub-tasks have been performed or are in progress:"},
    {% if pre_sub_tasks %}
        {% for pre in pre_sub_tasks %}
    {"type": "text", "text": "{{ pre }}"},
        {% endfor %}
    {% else %}
    {"type": "text", "text": "No history"},{% endif %}

    {"type": "text", "text": "The sub-task performed to move from the start frame towards the end frame is:\n<sub_task>{{ sub_task }}</sub_task>\n"},
    
    {"type": "text", "text": "Provide reasoning for why this sub-task should be performed next, based **only on the start frame, the task instruction, and the sub-tasks that have been performed or are in progress**. Do NOT use information from the end frame in your reasoning.\n"},
    
    {"type": "text", "text": "Output in the following XML format:\n<reasoning>Describe the scene first, then explain why this sub-task is chosen based on the start frame, the task instruction, and the sub-tasks that have been performed or are in progress.</reasoning>\n"}
]